webpackJsonp([1],{"5LsX":function(e,t){},EG9n:function(e,t){},NHnr:function(e,t,n){"use strict";function r(e){if(!e)throw new Error("Name is required");return R+"_"+e}function a(){var e=localStorage.getItem(r(g));try{return JSON.parse(e)||[]}catch(e){return console.log("Can not get saved rules"),[]}}function i(e){return localStorage.setItem(r(g),k()(e))}function s(){return a().map(function(e){return Object(_.pick)(e,["id","name","updateTime"])})}function o(e){return Array.isArray(e)?a().filter(function(t){return e.includes(t.id)}):Object(_.find)(a(),function(t){return t.id===e})}function c(e){var t=a(),n=Object(_.findIndex)(t,function(t){return t.id===e.id});return n>=0?t[n]=e:t.push(e),i(t)}function u(e){return k()(function(e){return{title:"My PKERM rules",rules:o(e).map(function(e){var t=void 0;try{t=JSON.parse(e.content)}catch(t){return console.log("Can not parse config for "+e.name+"("+e.id+"). Skipped"),null}return t.description||(t.description=e.name),t}).filter(function(e){return e})}}(e),null,4)}function l(e){return function(t,n,r){var a=o(t.params.id);a||e.$router.replace({name:"Error",params:{code:404}}),O()(e,Object(_.pick)(a,S)),e.codeMirror&&e.codeMirror.setValue(d(e.content))}}function d(e){try{return k()(JSON.parse(e),null,4)}catch(t){return e}}function f(e){return function(t,n,r){e.ids=(t.params.ids||"").split(",")}}Object.defineProperty(t,"__esModule",{value:!0});var p=n("/5sW"),v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("header",{staticClass:"navbar navbar-default"},[t("div",{staticClass:"container"},[t("div",{staticClass:"navbar-header"},[t("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[this._v("PKERM")])],1),this._v(" "),t("div",{staticClass:"collapse navbar-collapse"},[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("router-link",{attrs:{to:"/"}},[this._v("Rules")])],1)])])])]),this._v(" "),t("div",{staticClass:"container"},[t("router-view")],1)])},staticRenderFns:[]},m=n("VU/8")({name:"app"},v,!1,function(e){n("Q9fF")},"data-v-0b67cf57",null).exports,h=n("/ocq"),_=n("M4fF"),b=n("mvHQ"),k=n.n(b),R="pkerm",g="rules",C=n("bIUY"),y=n.n(C),w={name:"Rules",data:function(){return{keyword:"",rules:[],checkedRules:[]}},computed:{filteredRules:function(){var e=this.keyword.trim();return e?this.rules.filter(function(t){return t.name.indexOf(e)>=0}):this.rules},formattedRules:function(){var e=this.checkedRules;return formatRules(this.rules.filter(function(t){return e.includes(t.id)}))}},methods:{addRule:function(){var e=(Math.floor(1e6*Math.random())+1e6).toString(36).toUpperCase();c({id:e,name:"Untitled",content:k()(y.a,null,4)}),this.$router.push({name:"Editor",params:{id:e}})},viewRules:function(){this.$router.push({name:"Viewer",params:{ids:this.checkedRules.join(",")}})},removeRule:function(e){!function(e){var t=a(),n=Object(_.findIndex)(t,function(t){return t.id===e});n>=0&&(t.splice(n,1),i(t))}(e),this.rules=s()},handleCheckAll:function(e){e.currentTarget.checked?this.checkedRules=this.filteredRules.map(function(e){return e.id}):this.checkedRules=[]}},filters:{formatTime:function(e){var t=new Date(e);return Object(_.padStart)(t.getDate(),2,"0")+"/"+Object(_.padStart)(t.getMonth()+1,2,"0")+"/"+t.getFullYear()+" "+Object(_.padStart)(t.getHours(),2,"0")+":"+Object(_.padStart)(t.getMinutes(),2,"0")}},beforeRouteEnter:function(e,t,n){n(function(e){e.rules=s()})}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"navi"},[n("div",[n("input",{staticClass:"checkall",attrs:{type:"checkbox"},on:{change:e.handleCheckAll}}),e._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:e.addRule}},[n("span",{staticClass:"glyphicon glyphicon-plus"}),e._v(" "),n("span",[e._v("Add Rule")])]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{title:"Check rules to view",disabled:!e.checkedRules.length},on:{click:e.viewRules}},[n("span",{staticClass:"glyphicon glyphicon-save"}),e._v(" "),n("span",[e._v("View Rules")])])]),e._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"search",placeholder:"search"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"rules"},[e.rules.length?e._e():n("div",{staticClass:"empty-tip"},[n("div",{staticClass:"alert alert-info"},[e._v("No rules for now.")])]),e._v(" "),e.rules.length&&!e.filteredRules.length?n("div",{staticClass:"empty-tip"},[n("div",{staticClass:"alert alert-warning"},[e._v("No matched rules.")])]):n("div",[n("ul",{staticClass:"list-group"},e._l(e.filteredRules,function(t){return n("li",{key:t.id,staticClass:"list-group-item"},[n("button",{staticClass:"btn btn-xs btn-danger pull-right",on:{click:function(n){e.removeRule(t.id)}}},[e._v("Ã—")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedRules,expression:"checkedRules"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.checkedRules)?e._i(e.checkedRules,t.id)>-1:e.checkedRules},on:{change:function(n){var r=e.checkedRules,a=n.target,i=!!a.checked;if(Array.isArray(r)){var s=t.id,o=e._i(r,s);a.checked?o<0&&(e.checkedRules=r.concat([s])):o>-1&&(e.checkedRules=r.slice(0,o).concat(r.slice(o+1)))}else e.checkedRules=i}}}),e._v(" "),n("router-link",{attrs:{to:{name:"Editor",params:{id:t.id}}}},[e._v(e._s(t.name))]),e._v(" "),t.updateTime?n("small",{staticClass:"text-muted",attrs:{title:"D/M/Y H:M:S"}},[e._v(e._s(e._f("formatTime")(t.updateTime)))]):e._e()],1)}))])])])},staticRenderFns:[]},E=n("VU/8")(w,x,!1,function(e){n("EG9n")},"data-v-55fadd95",null).exports,M=n("fZjL"),j=n.n(M),N=n("woOf"),O=n.n(N),S=["id","name","content"],A={lineNumbers:!0,mode:{name:"javascript",json:!0},gutters:["CodeMirror-lint-markers"],lint:!0},U={name:"Editor",data:function(){return S.reduce(function(e,t){return e[t]="",e},{})},methods:{handleFormSubmit:function(){this.content=this.$refs.content.value,c(O()({updateTime:Date.now()},Object(_.pick)(this,S)))}},mounted:function(){var e=CodeMirror.fromTextArea(this.$refs.content,A);e.setValue(d(this.content)),e.on("blur",function(){e.save()}),this.codeMirror=e;var t=j()(this.$refs.content.dataset).filter(function(e){return e.startsWith("v")})[0];t&&(e.getWrapperElement().dataset[t]=!0)},beforeRouteEnter:function(e,t,n){n(function(n){l(n)(e,t)})},beforeRouteUpdate:function(e,t,n){l(this)(e,t),n()}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor"},[n("h2",[e._v("Edit Rule")]),e._v(" "),n("form",{on:{submit:function(t){t.preventDefault(),e.handleFormSubmit(t)}}},[n("div",{staticClass:"form-group"},[n("label",[e._v("Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("Rule")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"content",staticClass:"form-control",domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[e._v("Save")])])])},staticRenderFns:[]},F=n("VU/8")(U,V,!1,function(e){n("Nlnt")},"data-v-7e6c4440",null).exports,T={name:"Viewer",props:{},data:function(){return{ids:[]}},computed:{formattedRules:function(){return u(this.ids)}},methods:{exportRules:function(e){var t=e.currentTarget,n="data:text/json;base64,"+btoa(this.formattedRules);t.href="karabiner://karabiner/assets/complex_modifications/import?url="+encodeURIComponent(n)}},beforeRouteEnter:function(e,t,n){n(function(n){f(n)(e,t)})},beforeRouteUpdate:function(e,t,n){f(this)(e,t),n()}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"viewer"},[t("h2",[this._v("View Rules")]),this._v(" "),t("div",{staticClass:"controls"},[t("a",{staticClass:"btn btn-link",on:{click:this.exportRules}},[t("span",{staticClass:"glyphicon glyphicon-share"}),this._v(" "),t("span",[this._v("Export to Karabiner Elements")])])]),this._v(" "),t("div",{staticClass:"rules"},[t("pre",[this._v(this._s(this.formattedRules))])])])},staticRenderFns:[]},P=n("VU/8")(T,$,!1,function(e){n("5LsX")},"data-v-3bc89498",null).exports;p.a.use(h.a);var I=new h.a({routes:[{path:"/",name:"Rules",component:E},{path:"/edit/:id",name:"Editor",component:F},{path:"/view/:ids",name:"Viewer",component:P}]});p.a.config.productionTip=!1,new p.a({el:"#app",router:I,render:function(e){return e(m)}})},Nlnt:function(e,t){},Q9fF:function(e,t){},bIUY:function(e,t){e.exports={description:"[SAMPLE] Post caps_lock if escape is pressed alone.",manipulators:[{type:"basic",from:{key_code:"escape",modifiers:{optional:["any"]}},to:[{key_code:"escape"}],to_if_alone:[{key_code:"caps_lock"}]}]}}},["NHnr"]);
//# sourceMappingURL=app.889cee772ff68291a4e6.js.map